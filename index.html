<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Visualización MRC</title>
  <script src="https://3Dmol.org/build/3Dmol-min.js"></script>
</head>
<body>
  <h2>Mapa de densidad interactivo (.mrc)</h2>
  <div style="width: 800px; height: 600px; position: relative;" id="viewer"></div>
  <script>
    const params = new URLSearchParams(window.location.search);
    const fileUrl = params.get("file");

    if (!fileUrl) {
      document.getElementById("viewer").innerHTML = "<p style='color:red;'>No se especificó ningún archivo .mrc en la URL.</p>";
    } else {
      let element = document.getElementById("viewer");
      let config = { backgroundColor: "white" };
      let viewer = $3Dmol.createViewer(element, config);
      $3Dmol.download(decodeURIComponent(fileUrl), viewer, {}, function() {
          viewer.zoomTo();
          viewer.render();
      });
    }
  </script>
</body>
</html>
